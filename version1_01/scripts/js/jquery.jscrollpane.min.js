/*
 * jScrollPane - v2.0.0beta9 - 2011-02-04
 * http://jscrollpane.kelvinluck.com/
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
(function(b,Ca,q){b.fn.jScrollPane=function(v){function ba(c,v){function H(a){var d,A,h,n,o;e=a;if(g===q)n=c.scrollTop(),o=c.scrollLeft(),c.css({overflow:"hidden",padding:0}),j=c.innerWidth()+I,i=c.innerHeight(),c.width(j),g=b('<div class="jspPane" />').css("padding",ka).append(c.children()),f=b('<div class="jspContainer" />').css({width:j+"px",height:i+"px"}).append(g).appendTo(c);else{c.css("width","");if(a=c.innerWidth()+I!=j||c.outerHeight()!=i)j=c.innerWidth()+I,i=c.innerHeight(),f.css({width:j+
"px",height:i+"px"});if(!a&&la==t&&g.outerHeight()==p){c.width(j);return}la=t;g.css("width","");c.width(j);f.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}a=g.clone(!1,!1).css("position","absolute");d=b('<div style="width:1px; position: relative;" />').append(a);b("body").append(d);t=Math.max(g.outerWidth(),a.outerWidth());d.remove();p=g.outerHeight();ca=t/j;W=p/i;w=W>1;u=ca>1;if(!u&&!w)c.removeClass("jspScrollable"),g.css({top:0,width:f.width()-I}),f.unbind(da),g.find(":input,a").unbind("focus.jsp"),
c.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),ma(),na();else{c.addClass("jspScrollable");if(a=e.maintainPosition&&(k||l))A=J(),h=K();ba();ta();ua();a&&(N(A,!1),B(h,!1));va();wa();xa();e.enableKeyboardNavigation&&ya();e.clickOnTrack&&za();Aa();e.hijackInternalLinks&&oa()}e.autoReinitialise&&!X?X=setInterval(function(){H(e)},e.autoReinitialiseDelay):!e.autoReinitialise&&X&&clearInterval(X);n&&c.scrollTop(0)&&B(n,!1);o&&c.scrollLeft(0)&&N(o,!1);c.trigger("jsp-initialised",
[u||w])}function ba(){w&&(f.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />'))),ea=f.find(">.jspVerticalBar"),x=ea.find(">.jspTrack"),r=x.find(">.jspDrag"),e.showArrows&&(R=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",C(0,-1)).bind("click.jsp",O),S=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",
C(0,1)).bind("click.jsp",O),e.arrowScrollOnHover&&(R.bind("mouseover.jsp",C(0,-1,R)),S.bind("mouseover.jsp",C(0,1,S))),pa(x,e.verticalArrowPositions,R,S)),P=i,f.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){P-=b(this).outerHeight()}),r.hover(function(){r.addClass("jspHover")},function(){r.removeClass("jspHover")}).bind("mousedown.jsp",function(a){b("html").bind("dragstart.jsp selectstart.jsp",O);r.addClass("jspActive");var d=a.pageY-r.position().top;b("html").bind("mousemove.jsp",
function(a){Q(a.pageY-d,!1)}).bind("mouseup.jsp mouseleave.jsp",qa);return!1}),ra())}function ra(){x.height(P+"px");k=0;fa=e.verticalGutter+x.outerWidth();g.width(j-fa-I);ea.position().left===0&&g.css("margin-left",fa+"px")}function ta(){u&&(f.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />'))),
ga=f.find(">.jspHorizontalBar"),y=ga.find(">.jspTrack"),s=y.find(">.jspDrag"),e.showArrows&&(T=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",C(-1,0)).bind("click.jsp",O),U=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",C(1,0)).bind("click.jsp",O),e.arrowScrollOnHover&&(T.bind("mouseover.jsp",C(-1,0,T)),U.bind("mouseover.jsp",C(1,0,U))),pa(y,e.horizontalArrowPositions,T,U)),s.hover(function(){s.addClass("jspHover")},function(){s.removeClass("jspHover")}).bind("mousedown.jsp",
function(a){b("html").bind("dragstart.jsp selectstart.jsp",O);s.addClass("jspActive");var d=a.pageX-s.position().left;b("html").bind("mousemove.jsp",function(a){L(a.pageX-d,!1)}).bind("mouseup.jsp mouseleave.jsp",qa);return!1}),M=f.innerWidth(),sa())}function sa(){f.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){M-=b(this).outerWidth()});y.width(M+"px");l=0}function ua(){if(u&&w){var a=y.outerHeight(),d=x.outerWidth();P-=a;b(ga).find(">.jspCap:visible,>.jspArrow").each(function(){M+=
b(this).outerWidth()});M-=d;i-=d;j-=a;y.parent().append(b('<div class="jspCorner" />').css("width",a+"px"));ra();sa()}u&&g.width(f.outerWidth()-I+"px");p=g.outerHeight();W=p/i;if(u){D=Math.ceil(1/ca*M);if(D>e.horizontalDragMaxWidth)D=e.horizontalDragMaxWidth;else if(D<e.horizontalDragMinWidth)D=e.horizontalDragMinWidth;s.width(D+"px");E=M-D;ha(l)}if(w){F=Math.ceil(1/W*P);if(F>e.verticalDragMaxHeight)F=e.verticalDragMaxHeight;else if(F<e.verticalDragMinHeight)F=e.verticalDragMinHeight;r.height(F+"px");
z=P-F;ia(k)}}function pa(a,d,b,e){var c="before",o="after";d=="os"&&(d=/Mac/.test(navigator.platform)?"after":"split");d==c?o=d:d==o&&(c=d,d=b,b=e,e=d);a[c](b)[o](e)}function C(a,d,b){return function(){Ba(a,d,this,b);this.blur();return!1}}function Ba(a,d,c,h){c=b(c).addClass("jspActive");var n,o,G=!0,f=function(){a!==0&&m.scrollByX(a*e.arrowButtonSpeed);d!==0&&m.scrollByY(d*e.arrowButtonSpeed);o=setTimeout(f,G?e.initialDelay:e.arrowRepeatFreq);G=!1};f();n=h?"mouseout.jsp":"mouseup.jsp";h=h||b("html");
h.bind(n,function(){c.removeClass("jspActive");o&&clearTimeout(o);o=null;h.unbind(n)})}function za(){ma();w&&x.bind("mousedown.jsp",function(a){if(a.originalTarget===q||a.originalTarget==a.currentTarget){var d=b(this),c=d.offset(),h=a.pageY-c.top-k,n,o=!0,f=function(){var b=d.offset();b=a.pageY-b.top-F/2;var c=i*e.scrollPagePercent,A=z*c/(p-i);if(h<0)k-A>b?m.scrollByY(-c):Q(b);else if(h>0)k+A<b?m.scrollByY(c):Q(b);else{g();return}n=setTimeout(f,o?e.initialDelay:e.trackClickRepeatFreq);o=!1},g=function(){n&&
clearTimeout(n);n=null;b(document).unbind("mouseup.jsp",g)};f();b(document).bind("mouseup.jsp",g);return!1}});u&&y.bind("mousedown.jsp",function(a){if(a.originalTarget===q||a.originalTarget==a.currentTarget){var d=b(this),c=d.offset(),h=a.pageX-c.left-l,n,o=!0,f=function(){var b=d.offset();b=a.pageX-b.left-D/2;var c=j*e.scrollPagePercent,A=E*c/(t-j);if(h<0)l-A>b?m.scrollByX(-c):L(b);else if(h>0)l+A<b?m.scrollByX(c):L(b);else{g();return}n=setTimeout(f,o?e.initialDelay:e.trackClickRepeatFreq);o=!1},
g=function(){n&&clearTimeout(n);n=null;b(document).unbind("mouseup.jsp",g)};f();b(document).bind("mouseup.jsp",g);return!1}})}function ma(){y&&y.unbind("mousedown.jsp");x&&x.unbind("mousedown.jsp")}function qa(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");r&&r.removeClass("jspActive");s&&s.removeClass("jspActive")}function Q(a,d){if(w){a<0?a=0:a>z&&(a=z);if(d===q)d=e.animateScroll;d?m.animate(r,"top",a,ia):(r.css("top",a),ia(a))}}function ia(a){if(a===
q)a=r.position().top;f.scrollTop(0);k=a;var d=k===0,b=k==z;a=-(a/z)*(p-i);if(Y!=d||Z!=b)Y=d,Z=b,c.trigger("jsp-arrow-change",[Y,Z,$,aa]);e.showArrows&&(R[d?"addClass":"removeClass"]("jspDisabled"),S[b?"addClass":"removeClass"]("jspDisabled"));g.css("top",a);c.trigger("jsp-scroll-y",[-a,d,b]).trigger("scroll")}function L(a,d){if(u){a<0?a=0:a>E&&(a=E);if(d===q)d=e.animateScroll;d?m.animate(s,"left",a,ha):(s.css("left",a),ha(a))}}function ha(a){if(a===q)a=s.position().left;f.scrollTop(0);l=a;var d=l===
0,b=l==E;a=-(a/E)*(t-j);if($!=d||aa!=b)$=d,aa=b,c.trigger("jsp-arrow-change",[Y,Z,$,aa]);e.showArrows&&(T[d?"addClass":"removeClass"]("jspDisabled"),U[b?"addClass":"removeClass"]("jspDisabled"));g.css("left",a);c.trigger("jsp-scroll-x",[-a,d,b]).trigger("scroll")}function B(a,d){Q(a/(p-i)*z,d)}function N(a,d){L(a/(t-j)*E,d)}function V(a,d,c){var h,n,g=0,G=0,m,k,l;try{h=b(a)}catch(p){return}n=h.outerHeight();a=h.outerWidth();f.scrollTop(0);for(f.scrollLeft(0);!h.is(".jspPane");)if(g+=h.position().top,
G+=h.position().left,h=h.offsetParent(),/^body|html$/i.test(h[0].nodeName))return;h=K();m=h+i;g<h||d?k=g-e.verticalGutter:g+n>m&&(k=g-i+n+e.verticalGutter);k&&B(k,c);viewportLeft=J();g=viewportLeft+j;G<viewportLeft||d?l=G-e.horizontalGutter:G+a>g&&(l=G-j+a+e.horizontalGutter);l&&N(l,c)}function J(){return-g.position().left}function K(){return-g.position().top}function wa(){f.unbind(da).bind(da,function(a,d,b,c){a=l;d=k;m.scrollBy(b*e.mouseWheelSpeed,-c*e.mouseWheelSpeed,!1);return a==l&&d==k})}function O(){return!1}
function va(){g.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){V(a.target,!1)})}function ya(){function a(){var a=l,c=k;switch(d){case 40:m.scrollByY(e.keyboardSpeed,!1);break;case 38:m.scrollByY(-e.keyboardSpeed,!1);break;case 34:case 32:m.scrollByY(i*e.scrollPagePercent,!1);break;case 33:m.scrollByY(-i*e.scrollPagePercent,!1);break;case 39:m.scrollByX(e.keyboardSpeed,!1);break;case 37:m.scrollByX(-e.keyboardSpeed,!1)}return b=a!=l||c!=k}var d,b;g.focus(function(){c.focus()});c.attr("tabindex",
0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(c){if(c.target===this){var e=l,g=k;switch(c.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=c.keyCode;a();break;case 35:B(p-i);d=null;break;case 36:B(0),d=null}b=c.keyCode==d&&e!=l||g!=k;return!b}}).bind("keypress.jsp",function(c){c.keyCode==d&&a();return!b});e.hideFocus?(c.css("outline","none"),"hideFocus"in f[0]&&c.attr("hideFocus",!0)):(c.css("outline",""),"hideFocus"in f[0]&&c.attr("hideFocus",!1))}function Aa(){if(location.hash&&
location.hash.length>1){var a,d;try{a=b(location.hash)}catch(c){return}a.length&&g.find(location.hash)&&(f.scrollTop()===0?d=setInterval(function(){f.scrollTop()>0&&(V(location.hash,!0),b(document).scrollTop(f.position().top),clearInterval(d))},50):(V(location.hash,!0),b(document).scrollTop(f.position().top)))}}function na(){b("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function oa(){na();b("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var a=this.href.split("#");
if(a.length>1&&(a=a[1],a.length>0&&g.find("#"+a).length>0))return V("#"+a,!0),!1})}function xa(){var a,d,b,c,e,g=!1;f.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(f){f=f.originalEvent.touches[0];a=J();d=K();b=f.pageX;c=f.pageY;e=!1;g=!0}).bind("touchmove.jsp",function(f){if(g){f=f.originalEvent.touches[0];var i=l,j=k;m.scrollTo(a+b-f.pageX,d+c-f.pageY);e=e||Math.abs(b-f.pageX)>5||Math.abs(c-f.pageY)>5;return i==l&&j==k}}).bind("touchend.jsp",
function(){g=!1}).bind("click.jsp-touchclick",function(){if(e)return e=!1})}var e,m=this,g,j,i,f,t,p,ca,W,w,u,r,z,k,s,E,l,ea,x,fa,P,F,R,S,ga,y,M,D,T,U,X,ka,I,la,Y=!0,$=!0,Z=!1,aa=!1,ja=c.clone(!1,!1).empty(),da=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";ka=c.css("paddingTop")+" "+c.css("paddingRight")+" "+c.css("paddingBottom")+" "+c.css("paddingLeft");I=(parseInt(c.css("paddingLeft"),10)||0)+(parseInt(c.css("paddingRight"),10)||0);b.extend(m,{reinitialise:function(a){a=b.extend({},e,a);
H(a)},scrollToElement:function(a,d,b){V(a,d,b)},scrollTo:function(a,b,c){N(a,c);B(b,c)},scrollToX:function(a,b){N(a,b)},scrollToY:function(a,b){B(a,b)},scrollToPercentX:function(a,b){N(a*(t-j),b)},scrollToPercentY:function(a,b){B(a*(p-i),b)},scrollBy:function(a,b,c){m.scrollByX(a,c);m.scrollByY(b,c)},scrollByX:function(a,b){var c=(J()+a)/(t-j);L(c*E,b)},scrollByY:function(a,b){var c=(K()+a)/(p-i);Q(c*z,b)},positionDragX:function(a,b){L(a,b)},positionDragY:function(a,b){L(a,b)},animate:function(a,
b,c,g){var f={};f[b]=c;a.animate(f,{duration:e.animateDuration,ease:e.animateEase,queue:!1,step:g})},getContentPositionX:function(){return J()},getContentPositionY:function(){return K()},getContentWidth:function(){return t()},getContentHeight:function(){return p()},getPercentScrolledX:function(){return J()/(t-j)},getPercentScrolledY:function(){return K()/(p-i)},getIsScrollableH:function(){return u},getIsScrollableV:function(){return w},getContentPane:function(){return g},scrollToBottom:function(a){Q(z,
a)},hijackInternalLinks:function(){oa()},destroy:function(){var a=K(),b=J();c.removeClass("jspScrollable").unbind(".jsp");c.replaceWith(ja.append(g.children()));ja.scrollTop(a);ja.scrollLeft(b)}});H(v)}v=b.extend({},b.fn.jScrollPane.defaults,v);b.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){v[this]=v[this]||v.speed});var H;this.each(function(){var c=b(this),q=c.data("jsp");q?q.reinitialise(v):(q=new ba(c,v),c.data("jsp",q));H=H?H.add(c):c});return H};b.fn.jScrollPane.defaults=
{showArrows:!1,maintainPosition:!0,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",
enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);