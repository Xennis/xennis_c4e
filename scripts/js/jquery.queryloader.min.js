/*
 * QueryLoader		Preload your site before displaying it!
 * Author:			Gaya Kessler
 * Date:			23-09-09
 * URL:				http://www.gayadesign.com
 * Version:			1.0
 * A simple jQuery powered preloader to load every image on the page and in the CSS
 * before displaying the page to the user.
 */
var QueryLoader={overlay:"",loadBar:"",preloader:"",items:[],doneStatus:0,doneNow:0,selectorPreload:"body",ieLoadFixTime:2E3,ieTimeout:"",fixTimeoutTime:2500,fixTimeout:"",init:function(){QueryLoader.fixTimeout=setTimeout("QueryLoader.finishLoad()",QueryLoader.fixTimeoutTime);if(navigator.userAgent.match(/MSIE (\d+(?:\.\d+)+(?:b\d*)?)/)=="MSIE 6.0,6.0")return!1;QueryLoader.selectorPreload=="body"?(QueryLoader.spawnLoader(),QueryLoader.getImages(QueryLoader.selectorPreload),QueryLoader.createPreloading()):
$(document).ready(function(){QueryLoader.spawnLoader();QueryLoader.getImages(QueryLoader.selectorPreload);QueryLoader.createPreloading()});QueryLoader.ieTimeout=setTimeout("QueryLoader.ieLoadFix()",QueryLoader.ieLoadFixTime)},ieLoadFix:function(){if(navigator.appName=="Microsoft Internet Explorer")for(;100/QueryLoader.doneStatus*QueryLoader.doneNow<100;)QueryLoader.imgCallback()},imgCallback:function(){QueryLoader.doneNow++;QueryLoader.animateLoader()},getImages:function(b){$(b).find("*:not(script)").each(function(){var a=
"";$(this).css("background-image")!="none"?a=$(this).css("background-image"):typeof $(this).attr("src")!="undefined"&&$(this).attr("tagName").toLowerCase()=="img"&&(a=$(this).attr("src"));a=a.replace('url("',"");a=a.replace("url(","");a=a.replace('")',"");a=a.replace(")","");a.length>0&&QueryLoader.items.push(a)})},createPreloading:function(){QueryLoader.preloader=$("<div></div>").appendTo(QueryLoader.selectorPreload);$(QueryLoader.preloader).css({height:"0px",width:"0px",overflow:"hidden"});var b=
QueryLoader.items.length;QueryLoader.doneStatus=b;for(var a=0;a<b;a++){var c=$("<img></img>");$(c).attr("src",QueryLoader.items[a]);$(c).unbind("load");$(c).bind("load",function(){QueryLoader.imgCallback()});$(c).appendTo($(QueryLoader.preloader))}},spawnLoader:function(){if(QueryLoader.selectorPreload=="body")var b=$(window).height(),a=$(window).width(),c="fixed";else b=$(QueryLoader.selectorPreload).outerHeight(),a=$(QueryLoader.selectorPreload).outerWidth(),c="absolute";var d=$(QueryLoader.selectorPreload).offset().left,
e=$(QueryLoader.selectorPreload).offset().top;QueryLoader.overlay=$("<div></div>").appendTo($(QueryLoader.selectorPreload));$(QueryLoader.overlay).addClass("QOverlay");$(QueryLoader.overlay).css({position:c,top:e,left:d,width:a+"px",height:b+"px"});QueryLoader.loadBar=$("<div></div>").appendTo($(QueryLoader.overlay));$(QueryLoader.loadBar).addClass("QLoader");$(QueryLoader.loadBar).css({position:"relative",top:"50%",width:"0%"});QueryLoader.loadAmt=$("<div>0%</div>").appendTo($(QueryLoader.overlay));
$(QueryLoader.loadAmt).addClass("QAmt");$(QueryLoader.loadAmt).css({position:"relative",top:"50%",left:"50%"})},animateLoader:function(){var b=100/QueryLoader.doneStatus*QueryLoader.doneNow;b>99?QueryLoader.finishLoad():($(QueryLoader.loadBar).stop().animate({width:b+"%"},500,"linear",function(){}),$(QueryLoader.loadAmt).html(Math.floor(b)+"%"))},finishLoad:function(){clearTimeout(QueryLoader.fixTimeout);$(QueryLoader.loadAmt).html("100%");$(QueryLoader.loadBar).stop().animate({width:"100%"},500,
"linear",function(){QueryLoader.doneLoad()})},doneLoad:function(){clearTimeout(QueryLoader.ieTimeout);var b=QueryLoader.selectorPreload=="body"?$(window).height():$(QueryLoader.selectorPreload).outerHeight();$(QueryLoader.loadAmt).hide();$(QueryLoader.loadBar).animate({height:b+"px",top:0},500,"linear",function(){$(QueryLoader.overlay).fadeOut(800);$(QueryLoader.preloader).remove()})}};